function addEvent(c,d,e){c.addEventListener?c.addEventListener(d,function(c){e(c,c.target)},!1):c.attachEvent&&c.attachEvent("on"+d,function(c){e(c,c.srcElement)})}function shouldBeValidated(c){return!(c.getAttribute("readonly")||c.readonly)&&!(c.getAttribute("disabled")||c.disabled)&&(c.getAttribute("pattern")||c.getAttribute("required"))}
function instantValidation(c){if(shouldBeValidated(c)){var d=c.getAttribute("required")&&!c.value||c.getAttribute("pattern")&&c.value&&!(new RegExp(c.getAttribute("pattern"))).test(c.value);!d&&c.getAttribute("aria-invalid")?c.removeAttribute("aria-invalid"):d&&!c.getAttribute("aria-invalid")&&c.setAttribute("aria-invalid","true")}}
for(var fields=[document.getElementsByTagName("input"),document.getElementsByTagName("textarea")],a=fields.length,i=0;i<a;i++)for(var b=fields[i].length,j=0;j<b;j++)addEvent(fields[i][j],"change",function(c,d){instantValidation(d)});
