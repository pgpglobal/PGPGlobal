function addEvent(t,e,i){t.addEventListener?t.addEventListener(e,function(t){i(t,t.target)},!1):t.attachEvent&&t.attachEvent("on"+e,function(t){i(t,t.srcElement)})}function shouldBeValidated(t){return!(t.getAttribute("readonly")||t.readonly)&&!(t.getAttribute("disabled")||t.disabled)&&(t.getAttribute("pattern")||t.getAttribute("required"))}function instantValidation(t){if(shouldBeValidated(t)){var e=t.getAttribute("required")&&!t.value||t.getAttribute("pattern")&&t.value&&!new RegExp(t.getAttribute("pattern")).test(t.value);!e&&t.getAttribute("aria-invalid")?t.removeAttribute("aria-invalid"):e&&!t.getAttribute("aria-invalid")&&t.setAttribute("aria-invalid","true")}}for(var fields=[document.getElementsByTagName("input"),document.getElementsByTagName("textarea")],a=fields.length,i=0;i<a;i++)for(var b=fields[i].length,j=0;j<b;j++)addEvent(fields[i][j],"change",function(t,e){instantValidation(e)});